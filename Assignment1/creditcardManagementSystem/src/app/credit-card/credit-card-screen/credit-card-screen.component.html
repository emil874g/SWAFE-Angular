<div class="credit-card-screen">
    <div class="credit-card-screen__container">
        <h2 class="credit-card-screen__title">Add New Credit Card</h2>

        <form [formGroup]="creditCardForm" (ngSubmit)="onSubmit()" class="credit-card-screen__form">
            
          
            <div class="credit-card-screen__form-group">
                <label class="credit-card-screen__label" for="card_number">
                    Card Number * <span class="credit-card-screen__hint">(7-16 digits)</span>
                </label>
                <input 
                    type="text" 
                    id="card_number"
                    formControlName="card_number"
                    (input)="onDigitInput($event, 'card_number', 16)"
                    class="credit-card-screen__input"
                    [class.credit-card-screen__input--error]="showError('card_number')"
                    placeholder="1234567890123456"
                    maxlength="16"
                />
                @if (showError('card_number')) {
                    <span class="credit-card-screen__error">
                        {{ getError('card_number') }}
                    </span>
                }
            </div>

         
            <div class="credit-card-screen__form-group">
                <label class="credit-card-screen__label" for="cardholder_name">Cardholder Name *</label>
                <input 
                    type="text" 
                    id="cardholder_name"
                    formControlName="cardholder_name"
                    class="credit-card-screen__input"
                    [class.credit-card-screen__input--error]="showError('cardholder_name')"
                    placeholder="John Doe"
                />
                @if (showError('cardholder_name')) {
                    <span class="credit-card-screen__error">
                        {{ getError('cardholder_name') }}
                    </span>
                }
            </div>

            
            <div class="credit-card-screen__form-group">
                <label class="credit-card-screen__label" for="csc_code">
                    CSC Code * <span class="credit-card-screen__hint">(3 digits)</span>
                </label>
                <input 
                    type="text" 
                    id="csc_code"
                    formControlName="csc_code"
                    (input)="onDigitInput($event, 'csc_code', 3)"
                    class="credit-card-screen__input"
                    [class.credit-card-screen__input--error]="showError('csc_code')"
                    placeholder="123"
                    maxlength="3"
                />
                @if (showError('csc_code')) {
                    <span class="credit-card-screen__error">
                        {{ getError('csc_code') }}
                    </span>
                }
            </div>

           
            <div class="credit-card-screen__form-row">
                
                <div class="credit-card-screen__form-group">
                    <label class="credit-card-screen__label" for="expiry_date_month">
                        Expiry Month * <span class="credit-card-screen__hint">(1-12)</span>
                    </label>
                    <input 
                        type="number" 
                        id="expiry_date_month"
                        formControlName="expiry_date_month"
                        (input)="onDigitInput($event, 'expiry_date_month', 2)"
                        class="credit-card-screen__input"
                        [class.credit-card-screen__input--error]="showError('expiry_date_month')"
                        placeholder="12"
                        min="1"
                        max="12"
                    />
                    @if (showError('expiry_date_month')) {
                        <span class="credit-card-screen__error">
                            {{ getError('expiry_date_month') }}
                        </span>
                    }
                </div>

               
                <div class="credit-card-screen__form-group">
                    <label class="credit-card-screen__label" for="expiry_date_year">Expiry Year *</label>
                    <input 
                        type="number" 
                        id="expiry_date_year"
                        formControlName="expiry_date_year"
                        (input)="onDigitInput($event, 'expiry_date_year', 2)"
                        class="credit-card-screen__input"
                        [class.credit-card-screen__input--error]="showError('expiry_date_year')"
                        placeholder="25"
                        min="24"
                    />
                    @if (showError('expiry_date_year')) {
                        <span class="credit-card-screen__error">
                            {{ getError('expiry_date_year') }}
                        </span>
                    }
                </div>
            </div>

        
            <div class="credit-card-screen__form-group">
                <label class="credit-card-screen__label" for="issuer">Issuer *</label>
                <select 
                    id="issuer"
                    formControlName="issuer"
                    class="credit-card-screen__input"
                    [class.credit-card-screen__input--error]="showError('issuer')"
                >
                    <option value="">Select an issuer</option>
                    @for (issuer of issuers; track issuer) {
                        <option [value]="issuer">{{ issuer }}</option>
                    }
                </select>
                @if (showError('issuer')) {
                    <span class="credit-card-screen__error">
                        {{ getError('issuer') }}
                    </span>
                }
            </div>

          
            @if (submitted && creditCardForm.invalid) {
                <div class="credit-card-screen__form-error">
                    Please fix the errors above before submitting.
                </div>
            }

            
            <div class="credit-card-screen__actions">
                <button 
                    type="button" 
                    class="credit-card-screen__button credit-card-screen__button--cancel"
                    (click)="onCancel()"
                >
                    Cancel
                </button>
                <button 
                    type="submit" 
                    class="credit-card-screen__button credit-card-screen__button--submit"
                >
                    Add Credit Card
                </button>
            </div>
        </form>
    </div>
</div>